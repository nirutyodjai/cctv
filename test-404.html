<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test 404 Error</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px; 
            background: #f5f5f5; 
        }
        .test-box {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .error { color: #dc3545; }
        .success { color: #28a745; }
        .warning { color: #ffc107; }
        button {
            padding: 8px 15px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .btn-primary { background: #007bff; color: white; }
        .btn-success { background: #28a745; color: white; }
        .btn-warning { background: #ffc107; color: #333; }
        .btn-danger { background: #dc3545; color: white; }
    </style>
</head>
<body>
    <h1>üîç Test 404 Error</h1>
    
    <div class="test-box">
        <h3>üìÅ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÑ‡∏ü‡∏•‡πå</h3>
        <div id="fileCheck">
            <p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÑ‡∏ü‡∏•‡πå...</p>
        </div>
        <button class="btn-primary" onclick="checkFiles()">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà</button>
    </div>

    <div class="test-box">
        <h3>üåê ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö URL</h3>
        <div id="urlCheck">
            <p>URL ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: <span id="currentUrl"></span></p>
            <p>Base URL: <span id="baseUrl"></span></p>
        </div>
        <button class="btn-warning" onclick="checkUrls()">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö URL ‡πÉ‡∏´‡∏°‡πà</button>
    </div>

    <div class="test-box">
        <h3>üì° ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå</h3>
        <div id="loadCheck">
            <p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå...</p>
        </div>
        <button class="btn-success" onclick="testFileLoading()">‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î</button>
    </div>

    <div class="test-box">
        <h3>üîß ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏±‡∏ç‡∏´‡∏≤</h3>
        <button class="btn-primary" onclick="fixPaths()">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Path</button>
        <button class="btn-warning" onclick="clearCache()">‡∏•‡πâ‡∏≤‡∏á Cache</button>
        <button class="btn-danger" onclick="goToMain()">‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
    </div>

    <script>
        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÑ‡∏ü‡∏•‡πå
        function checkFiles() {
            const fileCheck = document.getElementById('fileCheck');
            fileCheck.innerHTML = '<p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö...</p>';
            
            const files = [
                './cctv.js',
                './collaborative.js',
                './index.htm',
                './index.html'
            ];
            
            let results = '';
            let checked = 0;
            
            files.forEach(file => {
                fetch(file, { method: 'HEAD' })
                    .then(response => {
                        checked++;
                        if (response.ok) {
                            results += `<p class="success">‚úÖ ${file} - ‡∏û‡∏ö‡πÑ‡∏ü‡∏•‡πå</p>`;
                        } else {
                            results += `<p class="error">‚ùå ${file} - ‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÑ‡∏ü‡∏•‡πå (${response.status})</p>`;
                        }
                        
                        if (checked === files.length) {
                            fileCheck.innerHTML = results;
                        }
                    })
                    .catch(error => {
                        checked++;
                        results += `<p class="error">‚ùå ${file} - ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ${error.message}</p>`;
                        
                        if (checked === files.length) {
                            fileCheck.innerHTML = results;
                        }
                    });
            });
        }

        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö URL
        function checkUrls() {
            const urlCheck = document.getElementById('urlCheck');
            const currentUrl = window.location.href;
            const baseUrl = window.location.origin + window.location.pathname.replace(/\/[^\/]*$/, '');
            
            document.getElementById('currentUrl').textContent = currentUrl;
            document.getElementById('baseUrl').textContent = baseUrl;
            
            urlCheck.innerHTML += `
                <p>Pathname: ${window.location.pathname}</p>
                <p>Search: ${window.location.search}</p>
                <p>Hash: ${window.location.hash}</p>
            `;
        }

        // ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå
        function testFileLoading() {
            const loadCheck = document.getElementById('loadCheck');
            loadCheck.innerHTML = '<p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏î‡∏™‡∏≠‡∏ö...</p>';
            
            // ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÇ‡∏´‡∏•‡∏î cctv.js
            const script = document.createElement('script');
            script.src = './cctv.js';
            script.onload = () => {
                loadCheck.innerHTML = '<p class="success">‚úÖ ‡πÇ‡∏´‡∏•‡∏î cctv.js ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</p>';
            };
            script.onerror = () => {
                loadCheck.innerHTML = '<p class="error">‚ùå ‡πÇ‡∏´‡∏•‡∏î cctv.js ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</p>';
            };
            document.head.appendChild(script);
        }

        // ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Path
        function fixPaths() {
            const currentPath = window.location.pathname;
            if (currentPath.includes('/index.html/')) {
                const scriptPath = currentPath.split('/index.html/')[1];
                const basePath = currentPath.replace('/index.html', '');
                window.location.href = basePath + '/' + scriptPath;
            } else {
                window.location.href = './index.htm';
            }
        }

        // ‡∏•‡πâ‡∏≤‡∏á Cache
        function clearCache() {
            if ('caches' in window) {
                caches.keys().then(names => {
                    names.forEach(name => {
                        caches.delete(name);
                    });
                });
            }
            window.location.reload(true);
        }

        // ‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
        function goToMain() {
            window.location.href = './index.htm';
        }

        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö
        window.onload = function() {
            checkFiles();
            checkUrls();
        };
    </script>
</body>
</html>
