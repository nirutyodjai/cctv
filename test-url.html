<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CCTV Planner - ‡∏ó‡∏î‡∏™‡∏≠‡∏ö URL</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .success { background-color: #d4edda; border-color: #c3e6cb; }
        .error { background-color: #f8d7da; border-color: #f5c6cb; }
        .info { background-color: #d1ecf1; border-color: #bee5eb; }
        .warning { background-color: #fff3cd; border-color: #ffeaa7; }
        button { padding: 10px 20px; margin: 5px; cursor: pointer; }
        pre { background: #f8f9fa; padding: 10px; border-radius: 3px; overflow-x: auto; }
        .url-test { margin: 10px 0; padding: 10px; border-left: 4px solid #007bff; }
    </style>
</head>
<body>
    <h1>CCTV Planner - ‡∏ó‡∏î‡∏™‡∏≠‡∏ö URL</h1>
    
    <div class="test-section info">
        <h3>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• URL ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</h3>
        <p><strong>URL ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô:</strong> <span id="currentUrl"></span></p>
        <p><strong>Pathname:</strong> <span id="currentPathname"></span></p>
        <p><strong>Base URL:</strong> <span id="baseUrl"></span></p>
    </div>

    <div class="test-section">
        <h3>‡∏ó‡∏î‡∏™‡∏≠‡∏ö URL ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á</h3>
        <div class="url-test">
            <strong>‚úÖ URL ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á:</strong><br>
            <code>https://www.comdee.co.th/cctv/index.htm</code><br>
            <code>https://www.comdee.co.th/cctv/</code>
        </div>
        <div class="url-test">
            <strong>‚ùå URL ‡∏ó‡∏µ‡πà‡∏ú‡∏¥‡∏î:</strong><br>
            <code>https://www.comdee.co.th/cctv/index.html</code><br>
            <code>https://www.comdee.co.th/cctv/index.html/cctv.js</code>
        </div>
    </div>

    <div class="test-section">
        <h3>‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå</h3>
        <button onclick="testCorrectURLs()">‡∏ó‡∏î‡∏™‡∏≠‡∏ö URL ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á</button>
        <button onclick="testIncorrectURLs()">‡∏ó‡∏î‡∏™‡∏≠‡∏ö URL ‡∏ó‡∏µ‡πà‡∏ú‡∏¥‡∏î</button>
        <div id="urlTestResult"></div>
    </div>

    <div class="test-section">
        <h3>‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£ Redirect</h3>
        <button onclick="testRedirects()">‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£ Redirect</button>
        <div id="redirectTestResult"></div>
    </div>

    <div class="test-section">
        <h3>‡∏™‡∏£‡πâ‡∏≤‡∏á URL ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á</h3>
        <button onclick="generateCorrectURLs()">‡∏™‡∏£‡πâ‡∏≤‡∏á URL ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á</button>
        <div id="generatedURLs"></div>
    </div>

    <div class="test-section warning">
        <h3>‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</h3>
        <ul>
            <li>‡πÉ‡∏ä‡πâ <code>index.htm</code> ‡πÅ‡∏ó‡∏ô <code>index.html</code></li>
            <li>‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÑ‡∏ü‡∏•‡πå JavaScript ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô</li>
            <li>‡πÉ‡∏ä‡πâ relative path <code>./cctv.js</code> ‡πÅ‡∏ó‡∏ô absolute path</li>
            <li>‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö server configuration (.htaccess, web.config, nginx.conf)</li>
        </ul>
    </div>

    <script>
        // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô
        document.getElementById('currentUrl').textContent = window.location.href;
        document.getElementById('currentPathname').textContent = window.location.pathname;
        document.getElementById('baseUrl').textContent = window.location.origin + window.location.pathname.replace(/\/[^\/]*$/, '');

        // ‡∏ó‡∏î‡∏™‡∏≠‡∏ö URL ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
        function testCorrectURLs() {
            const resultDiv = document.getElementById('urlTestResult');
            resultDiv.innerHTML = '<p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏î‡∏™‡∏≠‡∏ö...</p>';
            
            const tests = [
                { name: 'index.htm', url: './index.htm' },
                { name: 'cctv.js', url: './cctv.js' },
                { name: 'collaborative.js', url: './collaborative.js' }
            ];
            
            let results = [];
            
            tests.forEach(test => {
                fetch(test.url)
                    .then(response => {
                        const status = response.status;
                        const contentType = response.headers.get('content-type');
                        
                        if (status === 200) {
                            results.push(`‚úÖ ${test.name}: ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (${status}, ${contentType})`);
                        } else {
                            results.push(`‚ùå ${test.name}: ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß (${status})`);
                        }
                        
                        if (results.length === tests.length) {
                            resultDiv.innerHTML = `
                                <div class="success">
                                    <h4>‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö URL ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á:</h4>
                                    ${results.map(r => `<p>${r}</p>`).join('')}
                                </div>
                            `;
                        }
                    })
                    .catch(error => {
                        results.push(`‚ùå ${test.name}: ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î (${error.message})`);
                        
                        if (results.length === tests.length) {
                            resultDiv.innerHTML = `
                                <div class="error">
                                    <h4>‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö URL ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á:</h4>
                                    ${results.map(r => `<p>${r}</p>`).join('')}
                                </div>
                            `;
                        }
                    });
            });
        }

        // ‡∏ó‡∏î‡∏™‡∏≠‡∏ö URL ‡∏ó‡∏µ‡πà‡∏ú‡∏¥‡∏î
        function testIncorrectURLs() {
            const resultDiv = document.getElementById('urlTestResult');
            resultDiv.innerHTML = '<p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏î‡∏™‡∏≠‡∏ö...</p>';
            
            const tests = [
                { name: 'index.html', url: './index.html' },
                { name: 'index.html/cctv.js', url: './index.html/cctv.js' },
                { name: 'index.html/collaborative.js', url: './index.html/collaborative.js' }
            ];
            
            let results = [];
            
            tests.forEach(test => {
                fetch(test.url)
                    .then(response => {
                        const status = response.status;
                        const contentType = response.headers.get('content-type');
                        
                        if (status === 200) {
                            results.push(`‚ö†Ô∏è ${test.name}: ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ (${status}, ${contentType})`);
                        } else if (status === 301 || status === 302) {
                            results.push(`üîÑ ${test.name}: Redirect (${status})`);
                        } else {
                            results.push(`‚ùå ${test.name}: ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß (${status})`);
                        }
                        
                        if (results.length === tests.length) {
                            resultDiv.innerHTML = `
                                <div class="warning">
                                    <h4>‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö URL ‡∏ó‡∏µ‡πà‡∏ú‡∏¥‡∏î:</h4>
                                    ${results.map(r => `<p>${r}</p>`).join('')}
                                </div>
                            `;
                        }
                    })
                    .catch(error => {
                        results.push(`‚ùå ${test.name}: ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î (${error.message})`);
                        
                        if (results.length === tests.length) {
                            resultDiv.innerHTML = `
                                <div class="error">
                                    <h4>‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö URL ‡∏ó‡∏µ‡πà‡∏ú‡∏¥‡∏î:</h4>
                                    ${results.map(r => `<p>${r}</p>`).join('')}
                                </div>
                            `;
                        }
                    });
            });
        }

        // ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£ Redirect
        function testRedirects() {
            const resultDiv = document.getElementById('redirectTestResult');
            resultDiv.innerHTML = '<p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏î‡∏™‡∏≠‡∏ö...</p>';
            
            const currentUrl = window.location.href;
            const baseUrl = currentUrl.replace(/\/[^\/]*$/, '');
            
            const redirectTests = [
                { from: baseUrl + '/index.html', to: baseUrl + '/index.htm' },
                { from: baseUrl + '/index.html/cctv.js', to: baseUrl + '/cctv.js' }
            ];
            
            let results = [];
            
            redirectTests.forEach(test => {
                fetch(test.from, { method: 'HEAD', redirect: 'manual' })
                    .then(response => {
                        const status = response.status;
                        const location = response.headers.get('location');
                        
                        if (status === 301 || status === 302) {
                            results.push(`‚úÖ Redirect: ${test.from} ‚Üí ${location || test.to} (${status})`);
                        } else {
                            results.push(`‚ùå ‡πÑ‡∏°‡πà‡∏°‡∏µ Redirect: ${test.from} (${status})`);
                        }
                        
                        if (results.length === redirectTests.length) {
                            resultDiv.innerHTML = `
                                <div class="success">
                                    <h4>‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö Redirect:</h4>
                                    ${results.map(r => `<p>${r}</p>`).join('')}
                                </div>
                            `;
                        }
                    })
                    .catch(error => {
                        results.push(`‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ${test.from} (${error.message})`);
                        
                        if (results.length === redirectTests.length) {
                            resultDiv.innerHTML = `
                                <div class="error">
                                    <h4>‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö Redirect:</h4>
                                    ${results.map(r => `<p>${r}</p>`).join('')}
                                </div>
                            `;
                        }
                    });
            });
        }

        // ‡∏™‡∏£‡πâ‡∏≤‡∏á URL ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
        function generateCorrectURLs() {
            const resultDiv = document.getElementById('generatedURLs');
            const currentUrl = window.location.href;
            const baseUrl = currentUrl.replace(/\/[^\/]*$/, '');
            
            const correctURLs = [
                { name: '‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å', url: baseUrl + '/index.htm' },
                { name: '‡πÑ‡∏ü‡∏•‡πå JavaScript ‡∏´‡∏•‡∏±‡∏Å', url: baseUrl + '/cctv.js' },
                { name: '‡πÑ‡∏ü‡∏•‡πå Collaboration', url: baseUrl + '/collaborative.js' },
                { name: '‡∏ó‡∏î‡∏™‡∏≠‡∏ö MIME Type', url: baseUrl + '/test-mime.html' },
                { name: '‡∏ó‡∏î‡∏™‡∏≠‡∏ö URL', url: baseUrl + '/test-url.html' }
            ];
            
            resultDiv.innerHTML = `
                <div class="success">
                    <h4>URL ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:</h4>
                    ${correctURLs.map(item => `
                        <p><strong>${item.name}:</strong> <a href="${item.url}" target="_blank">${item.url}</a></p>
                    `).join('')}
                </div>
            `;
        }

        // ‡∏£‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤
        window.onload = function() {
            setTimeout(() => {
                testCorrectURLs();
                setTimeout(() => testIncorrectURLs(), 2000);
                setTimeout(() => testRedirects(), 4000);
                setTimeout(() => generateCorrectURLs(), 6000);
            }, 1000);
        };
    </script>
</body>
</html>
